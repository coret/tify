import{r as w,_,c as r,F as h,a as p,o as d,n as b,b as i,d as m,w as k,v as x,e as $,f as I,t as g,g as U,h as L}from"./tify.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const t of a.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&l(t)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();const S=[{name:"Bodleian Libraries",url:"https://iiif.bodleian.ox.ac.uk/iiif/collection/top"},{name:"IIIF Cookbook",url:"https://develop.uni-goettingen.de/files/iiif-cookbook-collection.json"},{name:"National Library of Scotland",url:"https://view.nls.uk/collections/top.json"},{name:"Northwestern University Libraries",url:"https://api.dc.library.northwestern.edu/api/v2/collections?as=iiif"},{name:"TU Delft",url:"https://heritage.tudelft.nl/iiif/collection.json"},{name:"Universitätsbibliothek Leipzig",url:"https://iiif.ub.uni-leipzig.de/static/collections/toplevel.json"},{name:"Villanova University",url:"https://digital.library.villanova.edu/Collection/vudl:3/IIIF"},{name:"Wellcome Collection",url:"https://iiif.wellcomecollection.org/presentation/v3/collections/archives"}],u=w([]);class v{constructor(e={}){for(this.id=e.id||"";u.find(s=>s.id===this.id);)this.id=((parseInt(this.id,10)||1)+1).toString();this.colorMode="auto",this.contentStateActive=new URL(window.location).searchParams.get("iiif-content"),this.language=e.language||"en",this.manifestUrl=e.manifestUrl||"",this.sidebarOpen=!0,this.tify=null,u.push(this)}remove(){var s;(s=this.tify)==null||s.destroy(),this.tify=null;const e=new URL(window.location);e.searchParams.delete(`tify${this.id}`),u.length>1&&(u.splice(u.findIndex(l=>l.id===this.id),1),e.searchParams.delete(`language${this.id}`),e.searchParams.delete(`manifest${this.id}`)),window.history.pushState(null,"",e.toString())}loadManifest(e){var l;e&&(this.manifestUrl=e),(l=this.tify)==null||l.destroy(),this.tify=null;const s=new URL(window.location);!this.contentStateActive&&s.searchParams.get(`manifest${this.id}`)!==this.manifestUrl&&(s.searchParams.delete(`tify${this.id}`),s.searchParams.set(`manifest${this.id}`,this.manifestUrl),window.history.pushState(null,"",s.toString())),this.tify=new Tify({container:document.getElementById(`container${this.id}`),colorMode:this.colorMode,contentStateEnabled:this.contentStateActive,manifestUrl:this.manifestUrl,translationsDirUrl:"translations",language:this.language,urlQueryKey:`tify${this.id}`}),window.tify=this.tify}setLanguage(e){var l;this.language=e,(l=this.tify)==null||l.setLanguage(e);const s=new URL(window.location);e==="en"?s.searchParams.delete(`language${this.id}`):s.searchParams.set(`language${this.id}`,e),window.history.pushState(null,"",s.toString())}}const C={data(){return{instances:u,languages:window.tifyLanguages,sampleManifests:S}},mounted(){const f=new URL(window.location).searchParams;f.forEach((e,s)=>{if(!s.startsWith("manifest")&&s!=="iiif-content")return;const l=s==="iiif-content"?"":s.replace("manifest",""),n=new v({id:l,language:f.get(`language${l}`),manifestUrl:s==="iiif-content"?null:e,urlQueryKey:`tify${l}`});this.$nextTick(()=>{n.loadManifest()})}),u.length||new v},methods:{addInstance(){new v}}},P={style:{font:"14px/1rem sans-serif",margin:"0","min-height":"100vh",background:"#777",display:"flex",gap:"1px","flex-wrap":"wrap"}},O={key:0,class:"header"},M=["onSubmit"],F=["aria-controls","aria-expanded","onClick"],A=["onUpdate:modelValue"],N=["disabled"],R={style:{display:"flex"}},T=["id"],z={style:{"list-style":"none"}},V={style:{"margin-top":".25rem"}},j=["onClick"],B={"aria-description":"TIFY color mode",style:{display:"flex",gap:"1px","list-style":"none",margin:".5rem 0 0"}},E={class:"radio"},D=["value","checked","onClick"],K={"aria-description":"TIFY language",style:{columns:"2","column-gap":".25rem","list-style":"none",margin:".5rem 0"}},Q={class:"radio",style:{"border-radius":"2px","justify-content":"left"}},W=["value","checked","onClick"],Y={style:{"align-self":"center","align-content":"center",background:"light-dark(#0001, #fff2)","border-radius":"2px",flex:"1rem 0 0","font-size":".75em","line-height":".75rem","font-weight":"bold",margin:"0 .25rem 0 -.25rem","text-align":"center","text-transform":"uppercase"}},q={style:{"list-style":"none"}},G=["onClick"],H=["id"];function J(f,e,s,l,n,a){return d(),r("div",P,[(d(!0),r(h,null,p(n.instances,t=>(d(),r("section",{key:t.id,style:b(`
				background: light-dark(#bbb, #333);
				background: var(--header-bg);
				color: var(--text-color);
				flex: 1;
				position: relative;
				color-scheme: ${t.colorMode==="auto"?"light dark":t.colorMode};
			`)},[t.contentStateActive?I("",!0):(d(),r("header",O,[i("form",{style:{display:"flex",padding:".25rem",width:"100%",gap:".25rem"},onSubmit:$(o=>t.loadManifest(),["prevent"])},[i("button",{type:"button",class:"button","aria-label":"Toggle sidebar","aria-controls":`sidebar${t.id}`,"aria-expanded":t.sidebarOpen,style:{"font-size":"1rem",padding:"0",width:"1.5rem"},onClick:o=>t.sidebarOpen=!t.sidebarOpen},[t.sidebarOpen?(d(),r(h,{key:1},[m(" × ")],64)):(d(),r(h,{key:0},[m(" ☰ ")],64))],8,F),k(i("input",{"onUpdate:modelValue":o=>t.manifestUrl=o,type:"url",class:"input","aria-label":"IIIF manifest URL",placeholder:"IIIF manifest URL",onFocus:e[0]||(e[0]=o=>o.target.select())},null,40,A),[[x,t.manifestUrl]]),i("button",{type:"submit",class:"button",disabled:!t.manifestUrl}," Load ",8,N)],40,M)])),i("div",R,[i("div",{id:`sidebar${t.id}`,style:b([{"border-right":"1px solid var(--border-color)","margin-left":"-12rem",opacity:"0",padding:".5rem",transition:"margin .2s, opacity .2s, visibility .2s",visibility:"hidden",width:"12rem"},t.sidebarOpen?`
						margin: 0;
						opacity: 1;
						visibility: visible;
					`:""])},[i("ul",z,[i("li",null,[i("button",{type:"button",class:"button",style:{width:"100%"},onClick:e[1]||(e[1]=o=>a.addInstance())}," Add instance ")]),i("li",V,[i("button",{type:"button",class:"button",style:{width:"100%"},onClick:o=>t.remove()}," Remove instance ",8,j)])]),i("ul",B,[(d(),r(h,null,p(["auto","light","dark"],o=>i("li",{key:o,style:{flex:"1"}},[i("label",E,[i("input",{type:"radio",value:o,checked:t.colorMode===o,style:{opacity:"0",position:"absolute"},onClick:c=>{var y;t.colorMode=o,(y=t.tify)==null||y.updateOptions({colorMode:o})}},null,8,D),m(" "+g(o),1)])])),64))]),i("ul",K,[(d(!0),r(h,null,p(n.languages,(o,c)=>(d(),r("li",{key:c,style:{margin:"0 0 .25rem"}},[i("label",Q,[i("input",{type:"radio",value:c,checked:t.language===c,style:{opacity:"0",position:"absolute"},onClick:y=>t.setLanguage(c)},null,8,W),i("span",Y,g(c),1),m(" "+g(o),1)])]))),128))]),e[2]||(e[2]=i("h2",{style:{"font-size":"1.25em",margin:"0 0 .25rem"}}," Sample IIIF Manifests ",-1)),i("ul",q,[(d(!0),r(h,null,p(n.sampleManifests,o=>(d(),r("li",{key:o.url,style:{margin:"0 0 .25rem"}},[i("button",{type:"button",class:"ghost-button",style:{"text-align":"left",width:"100%"},onClick:c=>t.loadManifest(o.url)},g(o.name),9,G)]))),128))])],12,T),i("div",{id:`container${t.id}`,style:b(`
						background: var(--border-color);
						flex: 1;
						height: ${t.contentStateActive?"100vh":"calc(100vh - 2rem - 1px)"};
					`)},null,12,H)])],4))),128))])}const X=_(C,[["render",J]]);U({render:()=>L(X)}).mount("#app");
