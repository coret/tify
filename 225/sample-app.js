import{r as _,_ as k,c as a,F as h,a as m,o as d,n as b,b as n,d as p,w as x,v as $,e as I,f as w,t as g,g as U,h as L}from"./tify.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const e of r.addedNodes)e.tagName==="LINK"&&e.rel==="modulepreload"&&l(e)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();const S=[{name:"Bodleian Libraries",url:"https://iiif.bodleian.ox.ac.uk/iiif/collection/top"},{name:"IIIF Cookbook",url:"https://develop.uni-goettingen.de/files/iiif-cookbook-collection.json"},{name:"Northwestern University Libraries",url:"https://api.dc.library.northwestern.edu/api/v2/collections?as=iiif"},{name:"TU Delft",url:"https://heritage.tudelft.nl/iiif/collection.json"},{name:"Universitätsbibliothek Leipzig",url:"https://iiif.ub.uni-leipzig.de/static/collections/toplevel.json"},{name:"Villanova University",url:"https://digital.library.villanova.edu/Collection/vudl:3/IIIF"},{name:"Wellcome Collection",url:"https://iiif.wellcomecollection.org/presentation/v3/collections/archives"}],u=_([]);class v{constructor(t={}){for(this.id=t.id||"";u.find(i=>i.id===this.id);)this.id=((parseInt(this.id,10)||1)+1).toString();this.colorMode="auto",this.contentStateActive=new URL(window.location).searchParams.get("iiif-content"),this.language=t.language||"en",this.manifestUrl=t.manifestUrl||"",this.sidebarOpen=!0,this.tify=null,u.push(this)}remove(){var i;(i=this.tify)==null||i.destroy(),this.tify=null;const t=new URL(window.location);t.searchParams.delete(`tify${this.id}`),u.length>1&&(u.splice(u.findIndex(l=>l.id===this.id),1),t.searchParams.delete(`language${this.id}`),t.searchParams.delete(`manifest${this.id}`)),window.history.pushState(null,"",t.toString())}loadManifest(t){var l;t&&(this.manifestUrl=t),(l=this.tify)==null||l.destroy(),this.tify=null;const i=new URL(window.location);!this.contentStateActive&&i.searchParams.get(`manifest${this.id}`)!==this.manifestUrl&&(i.searchParams.delete(`tify${this.id}`),i.searchParams.set(`manifest${this.id}`,this.manifestUrl),window.history.pushState(null,"",i.toString())),this.tify=new Tify({container:document.getElementById(`container${this.id}`),colorMode:this.colorMode,contentStateEnabled:this.contentStateActive,manifestUrl:this.manifestUrl,translationsDirUrl:"translations",language:this.language,urlQueryKey:`tify${this.id}`}),window.tify=this.tify}setLanguage(t){var l;this.language=t,(l=this.tify)==null||l.setLanguage(t);const i=new URL(window.location);t==="en"?i.searchParams.delete(`language${this.id}`):i.searchParams.set(`language${this.id}`,t),window.history.pushState(null,"",i.toString())}}const C={data(){return{instances:u,languages:window.tifyLanguages,sampleManifests:S}},mounted(){const f=new URL(window.location).searchParams;f.forEach((t,i)=>{if(!i.startsWith("manifest")&&i!=="iiif-content")return;const l=i==="iiif-content"?"":i.replace("manifest",""),s=new v({id:l,language:f.get(`language${l}`),manifestUrl:i==="iiif-content"?null:t,urlQueryKey:`tify${l}`});this.$nextTick(()=>{s.loadManifest()})}),u.length||new v},methods:{addInstance(){new v}}},P={style:{font:"14px/1rem sans-serif",margin:"0","min-height":"100vh",background:"#777",display:"flex",gap:"1px","flex-wrap":"wrap"}},O={key:0,class:"header"},M=["onSubmit"],F=["aria-controls","aria-expanded","onClick"],A=["id","onUpdate:modelValue"],R=["disabled"],T={style:{display:"flex"}},N=["id"],z={style:{"list-style":"none"}},V={key:0,style:{"margin-top":".25rem"}},B=["onClick"],E={"aria-description":"TIFY color mode",style:{display:"flex",gap:"1px","list-style":"none",margin:".5rem 0 0"}},j={class:"radio"},D=["value","checked","onClick"],K={"aria-description":"TIFY language",style:{columns:"2","column-gap":".25rem","list-style":"none",margin:".5rem 0"}},Q={class:"radio",style:{"border-radius":"2px","justify-content":"left"}},W=["value","checked","onClick"],Y={style:{"align-self":"center","align-content":"center",background:"light-dark(#0001, #fff2)","border-radius":"2px",flex:"1rem 0 0","font-size":".75em","line-height":".75rem","font-weight":"bold",margin:"0 .25rem 0 -.25rem","text-align":"center","text-transform":"uppercase"}},q={style:{"list-style":"none"}},G=["onClick"],H=["id"];function J(f,t,i,l,s,r){return d(),a("div",P,[(d(!0),a(h,null,m(s.instances,e=>(d(),a("section",{key:e.id,style:b(`
				background: light-dark(#bbb, #333);
				background: var(--header-bg);
				color-scheme: ${e.colorMode==="auto"?"light dark":e.colorMode};
				color: var(--text-color);
				flex: 1;
				overflow: hidden;
				position: relative;
			`)},[e.contentStateActive?w("",!0):(d(),a("header",O,[n("form",{style:{display:"flex",padding:".25rem",width:"100%",gap:".25rem"},onSubmit:I(o=>e.loadManifest(),["prevent"])},[n("button",{type:"button",class:"button","aria-label":"Toggle sidebar","aria-controls":`sidebar${e.id}`,"aria-expanded":e.sidebarOpen,style:{"font-size":"1rem",padding:"0",width:"1.5rem"},onClick:o=>e.sidebarOpen=!e.sidebarOpen},[e.sidebarOpen?(d(),a(h,{key:1},[p(" 🐣 ")],64)):(d(),a(h,{key:0},[p(" 🥚 ")],64))],8,F),x(n("input",{id:`manifest${e.id}`,"onUpdate:modelValue":o=>e.manifestUrl=o,type:"url",class:"input","aria-label":"IIIF manifest URL",placeholder:"IIIF manifest URL",onFocus:t[0]||(t[0]=o=>o.target.select())},null,40,A),[[$,e.manifestUrl]]),n("button",{type:"submit",class:"button",disabled:!e.manifestUrl}," Load ",8,R)],40,M)])),n("div",T,[n("div",{id:`sidebar${e.id}`,style:b([{"border-right":"1px solid var(--border-color)","margin-left":"-12rem",opacity:"0",padding:".5rem",transition:"margin .2s, opacity .2s, visibility .2s",visibility:"hidden",width:"12rem"},e.sidebarOpen?`
						margin: 0;
						opacity: 1;
						visibility: visible;
					`:""])},[n("ul",z,[n("li",null,[n("button",{type:"button",class:"button",style:{width:"100%"},onClick:t[1]||(t[1]=o=>r.addInstance())}," Add instance ")]),e.tify||s.instances.length>1?(d(),a("li",V,[n("button",{type:"button",class:"button",style:{width:"100%"},onClick:o=>e.remove()}," Remove instance ",8,B)])):w("",!0)]),n("ul",E,[(d(),a(h,null,m(["auto","light","dark"],o=>n("li",{key:o,style:{flex:"1"}},[n("label",j,[n("input",{type:"radio",value:o,checked:e.colorMode===o,style:{opacity:"0",position:"absolute"},onClick:c=>{var y;e.colorMode=o,(y=e.tify)==null||y.updateOptions({colorMode:o})}},null,8,D),p(" "+g(o),1)])])),64))]),n("ul",K,[(d(!0),a(h,null,m(s.languages,(o,c)=>(d(),a("li",{key:c,style:{margin:"0 0 .25rem"}},[n("label",Q,[n("input",{type:"radio",value:c,checked:e.language===c,style:{opacity:"0",position:"absolute"},onClick:y=>e.setLanguage(c)},null,8,W),n("span",Y,g(c),1),p(" "+g(o),1)])]))),128))]),t[2]||(t[2]=n("h2",{style:{"font-size":"1.25em",margin:"0 0 .25rem"}}," Sample IIIF Manifests ",-1)),n("ul",q,[(d(!0),a(h,null,m(s.sampleManifests,o=>(d(),a("li",{key:o.url,style:{margin:"0 0 .25rem"}},[n("button",{type:"button",class:"ghost-button",style:{"text-align":"left",width:"100%"},onClick:c=>e.loadManifest(o.url)},g(o.name),9,G)]))),128))])],12,N),n("div",{id:`container${e.id}`,style:b(`
						background: var(--border-color);
						flex: 1;
						height: ${e.contentStateActive?"100vh":"calc(100vh - 2rem - 1px)"};
					`)},null,12,H)])],4))),128))])}const X=k(C,[["render",J]]);U({render:()=>L(X)}).mount("#app");
