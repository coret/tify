import{r as w,_,c as l,F as c,a as m,o,n as y,b as i,d as p,w as k,v as x,e as $,f as U,t as g,g as I,h as S}from"./tify.js";import"./sample-app.js";const L=[{name:"Bodleian Libraries",url:"https://iiif.bodleian.ox.ac.uk/iiif/collection/top"},{name:"IIIF Cookbook",url:"https://develop.uni-goettingen.de/files/iiif-cookbook-collection.json"},{name:"National Library of Scotland",url:"https://view.nls.uk/collections/top.json"},{name:"Northwestern University Libraries",url:"https://api.dc.library.northwestern.edu/api/v2/collections?as=iiif"},{name:"TU Delft",url:"https://heritage.tudelft.nl/iiif/collection.json"},{name:"Universitätsbibliothek Leipzig",url:"https://iiif.ub.uni-leipzig.de/static/collections/toplevel.json"},{name:"Villanova University",url:"https://digital.library.villanova.edu/Collection/vudl:3/IIIF"},{name:"Wellcome Collection",url:"https://iiif.wellcomecollection.org/presentation/v3/collections/archives"}],d=w([]);class b{constructor(t={}){for(this.id=t.id||"";d.find(s=>s.id===this.id);)this.id=((parseInt(this.id,10)||1)+1).toString();this.colorMode="auto",this.contentStateActive=new URL(window.location).searchParams.get("iiif-content"),this.language=t.language||"en",this.manifestUrl=t.manifestUrl||"",this.sidebarOpen=!0,this.tify=null,d.push(this)}remove(){var s;(s=this.tify)==null||s.destroy(),this.tify=null;const t=new URL(window.location);t.searchParams.delete(`tify${this.id}`),d.length>1&&(d.splice(d.findIndex(a=>a.id===this.id),1),t.searchParams.delete(`language${this.id}`),t.searchParams.delete(`manifest${this.id}`)),window.history.pushState(null,"",t.toString())}loadManifest(t){var a;t&&(this.manifestUrl=t),(a=this.tify)==null||a.destroy(),this.tify=null;const s=new URL(window.location);!this.contentStateActive&&s.searchParams.get(`manifest${this.id}`)!==this.manifestUrl&&(s.searchParams.delete(`tify${this.id}`),s.searchParams.set(`manifest${this.id}`,this.manifestUrl),window.history.pushState(null,"",s.toString())),this.tify=new Tify({container:document.getElementById(`container${this.id}`),colorMode:this.colorMode,contentStateEnabled:this.contentStateActive,manifestUrl:this.manifestUrl,translationsDirUrl:"translations",language:this.language,urlQueryKey:`tify${this.id}`}),window.tify=this.tify}setLanguage(t){var a;this.language=t,(a=this.tify)==null||a.setLanguage(t);const s=new URL(window.location);t==="en"?s.searchParams.delete(`language${this.id}`):s.searchParams.set(`language${this.id}`,t),window.history.pushState(null,"",s.toString())}}const C={data(){return{instances:d,languages:window.tifyLanguages,sampleManifests:L}},mounted(){const h=new URL(window.location).searchParams;h.forEach((t,s)=>{if(!s.startsWith("manifest")&&s!=="iiif-content")return;const a=s==="iiif-content"?"":s.replace("manifest",""),u=new b({id:a,language:h.get(`language${a}`),manifestUrl:s==="iiif-content"?null:t,urlQueryKey:`tify${a}`});this.$nextTick(()=>{u.loadManifest()})}),d.length||new b},methods:{addInstance(){new b}}},M={style:{font:"14px/1rem sans-serif",margin:"0","min-height":"100vh",background:"#777",display:"flex",gap:"1px","flex-wrap":"wrap"}},F={key:0,class:"header"},P=["onSubmit"],A=["aria-controls","aria-expanded","onClick"],R=["onUpdate:modelValue"],T=["disabled"],O={style:{display:"flex"}},z=["id"],V={style:{"list-style":"none"}},j={style:{"margin-top":".25rem"}},B=["onClick"],N={"aria-description":"TIFY color mode",style:{display:"flex",gap:"1px","list-style":"none",margin:".5rem 0 0"}},D={class:"radio"},E=["value","checked","onClick"],K={"aria-description":"TIFY language",style:{columns:"2","column-gap":".25rem","list-style":"none",margin:".5rem 0"}},Q={class:"radio",style:{"border-radius":"2px","justify-content":"left"}},W=["value","checked","onClick"],Y={style:{"align-self":"center","align-content":"center",background:"light-dark(#0001, #fff2)","border-radius":"2px",flex:"1rem 0 0","font-size":".75em","line-height":".75rem","font-weight":"bold",margin:"0 .25rem 0 -.25rem","text-align":"center","text-transform":"uppercase"}},q={style:{"list-style":"none"}},G=["onClick"],H=["id"];function J(h,t,s,a,u,v){return o(),l("div",M,[(o(!0),l(c,null,m(u.instances,e=>(o(),l("section",{key:e.id,style:y(`
				background: light-dark(#bbb, #333);
				background: var(--header-bg);
				color: var(--text-color);
				flex: 1;
				position: relative;
				color-scheme: ${e.colorMode==="auto"?"light dark":e.colorMode};
			`)},[e.contentStateActive?U("",!0):(o(),l("header",F,[i("form",{style:{display:"flex",padding:".25rem",width:"100%",gap:".25rem"},onSubmit:$(n=>e.loadManifest(),["prevent"])},[i("button",{type:"button",class:"button","aria-label":"Toggle sidebar","aria-controls":`sidebar${e.id}`,"aria-expanded":e.sidebarOpen,style:{"font-size":"1rem",padding:"0",width:"1.5rem"},onClick:n=>e.sidebarOpen=!e.sidebarOpen},[e.sidebarOpen?(o(),l(c,{key:1},[p(" × ")],64)):(o(),l(c,{key:0},[p(" ☰ ")],64))],8,A),k(i("input",{"onUpdate:modelValue":n=>e.manifestUrl=n,type:"url",class:"input","aria-label":"IIIF manifest URL",placeholder:"IIIF manifest URL",onFocus:t[0]||(t[0]=n=>n.target.select())},null,40,R),[[x,e.manifestUrl]]),i("button",{type:"submit",class:"button",disabled:!e.manifestUrl}," Load ",8,T)],40,P)])),i("div",O,[i("div",{id:`sidebar${e.id}`,style:y([{"border-right":"1px solid var(--border-color)","margin-left":"-12rem",opacity:"0",padding:".5rem",transition:"margin .2s, opacity .2s, visibility .2s",visibility:"hidden",width:"12rem"},e.sidebarOpen?`
						margin: 0;
						opacity: 1;
						visibility: visible;
					`:""])},[i("ul",V,[i("li",null,[i("button",{type:"button",class:"button",style:{width:"100%"},onClick:t[1]||(t[1]=n=>v.addInstance())}," Add instance ")]),i("li",j,[i("button",{type:"button",class:"button",style:{width:"100%"},onClick:n=>e.remove()}," Remove instance ",8,B)])]),i("ul",N,[(o(),l(c,null,m(["auto","light","dark"],n=>i("li",{key:n,style:{flex:"1"}},[i("label",D,[i("input",{type:"radio",value:n,checked:e.colorMode===n,style:{opacity:"0",position:"absolute"},onClick:r=>{var f;e.colorMode=n,(f=e.tify)==null||f.updateOptions({colorMode:n})}},null,8,E),p(" "+g(n),1)])])),64))]),i("ul",K,[(o(!0),l(c,null,m(u.languages,(n,r)=>(o(),l("li",{key:r,style:{margin:"0 0 .25rem"}},[i("label",Q,[i("input",{type:"radio",value:r,checked:e.language===r,style:{opacity:"0",position:"absolute"},onClick:f=>e.setLanguage(r)},null,8,W),i("span",Y,g(r),1),p(" "+g(n),1)])]))),128))]),t[2]||(t[2]=i("h2",{style:{"font-size":"1.25em",margin:"0 0 .25rem"}}," Sample IIIF Manifests ",-1)),i("ul",q,[(o(!0),l(c,null,m(u.sampleManifests,n=>(o(),l("li",{key:n.url,style:{margin:"0 0 .25rem"}},[i("button",{type:"button",class:"ghost-button",style:{"text-align":"left",width:"100%"},onClick:r=>e.loadManifest(n.url)},g(n.name),9,G)]))),128))])],12,z),i("div",{id:`container${e.id}`,style:y(`
						background: var(--border-color);
						flex: 1;
						height: ${e.contentStateActive?"100vh":"calc(100vh - 2rem - 1px)"};
					`)},null,12,H)])],4))),128))])}const X=_(C,[["render",J]]);I({render:()=>S(X)}).mount("#app");
